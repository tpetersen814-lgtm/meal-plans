<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Week 1 Meal Plan</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
            padding: 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #2c5f2d;
            margin-bottom: 10px;
            font-size: 2em;
        }
        
        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }
        
        .nav-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .nav-button {
            padding: 10px 20px;
            background-color: #2c5f2d;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s;
        }
        
        .nav-button:hover {
            background-color: #1f4420;
        }
        
        .nav-button.active {
            background-color: #1f4420;
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
        }
        
        .meal-day {
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .meal-header {
            background-color: #e8f5e9;
            padding: 15px 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .meal-header:hover {
            background-color: #c8e6c9;
        }
        
        .meal-header h2 {
            color: #2c5f2d;
            font-size: 1.3em;
        }
        
        .meal-meta {
            color: #666;
            font-size: 0.9em;
        }
        
        .expand-icon {
            font-size: 1.5em;
            color: #2c5f2d;
            transition: transform 0.3s;
        }
        
        .meal-day.expanded .expand-icon {
            transform: rotate(180deg);
        }
        
        .meal-content {
            display: none;
            padding: 20px;
            background-color: white;
        }
        
        .meal-day.expanded .meal-content {
            display: block;
        }
        
        .meal-content h3 {
            color: #2c5f2d;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.2em;
        }
        
        .meal-content h3:first-child {
            margin-top: 0;
        }
        
        .meal-content h4 {
            color: #2c5f2d;
            margin-top: 15px;
            margin-bottom: 8px;
            font-size: 1.05em;
        }
        
        .meal-content ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        
        .meal-content li {
            margin-bottom: 5px;
        }
        
        .meal-content ol {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        
        .meal-content ol li {
            margin-bottom: 10px;
        }
        
        .baby-note {
            background-color: #fff3e0;
            padding: 15px;
            border-left: 4px solid #ff9800;
            margin: 15px 0;
            border-radius: 4px;
        }
        
        .baby-note strong {
            color: #e65100;
        }
        
        .storage-tip {
            background-color: #e3f2fd;
            padding: 15px;
            border-left: 4px solid #2196f3;
            margin: 15px 0;
            border-radius: 4px;
        }
        
        .storage-tip strong {
            color: #1565c0;
        }
        
        .cooking-mode-button {
            margin-top: 15px;
            padding: 12px 24px;
            background-color: #4caf50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: background-color 0.3s;
            width: 100%;
        }
        
        .cooking-mode-button:hover {
            background-color: #45a049;
        }
        
        .grocery-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .grocery-section {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #ddd;
        }
        
        .grocery-section h3 {
            color: #2c5f2d;
            margin-bottom: 15px;
            font-size: 1.2em;
            border-bottom: 2px solid #2c5f2d;
            padding-bottom: 8px;
        }
        
        .grocery-section ul {
            list-style: none;
        }
        
        .grocery-section li {
            padding: 5px 0;
            padding-left: 25px;
            position: relative;
        }
        
        .grocery-section li:before {
            content: "";
        }
        
        .grocery-section input[type="checkbox"] {
            margin-right: 10px;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        .grocery-section li.checked {
            text-decoration: line-through;
            color: #999;
        }
        
        .add-item-section {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #ddd;
        }
        
        .add-item-input {
            width: calc(100% - 80px);
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1em;
        }
        
        .add-item-button {
            padding: 8px 15px;
            background-color: #4caf50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1em;
            margin-left: 5px;
        }
        
        .add-item-button:hover {
            background-color: #45a049;
        }
        
        .delete-item {
            color: #f44336;
            cursor: pointer;
            margin-left: 10px;
            font-weight: bold;
        }
        
        .delete-item:hover {
            color: #d32f2f;
        }
        
        .share-section {
            background-color: #e8f5e9;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .share-button {
            padding: 12px 24px;
            background-color: #2c5f2d;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .share-button:hover {
            background-color: #1f4420;
        }
        
        .share-url {
            display: none;
            margin-top: 15px;
            padding: 10px;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            word-break: break-all;
        }
        
        .share-url.active {
            display: block;
        }
        
        .copy-button {
            padding: 8px 16px;
            background-color: #4caf50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .copy-button:hover {
            background-color: #45a049;
        }
        
        /* Cooking Mode Styles */
        .cooking-mode-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: white;
            z-index: 1000;
            overflow: hidden;
        }
        
        .cooking-mode-overlay.active {
            display: flex;
            flex-direction: column;
        }
        
        .cooking-mode-header {
            background-color: #2c5f2d;
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .cooking-mode-title {
            font-size: 1.2em;
            font-weight: bold;
        }
        
        .close-cooking-mode {
            background: none;
            border: none;
            color: white;
            font-size: 1.5em;
            cursor: pointer;
            padding: 5px 10px;
        }
        
        .cooking-mode-progress {
            background-color: #e8f5e9;
            padding: 10px 20px;
            text-align: center;
            color: #2c5f2d;
            font-weight: bold;
        }
        
        .cooking-mode-content {
            flex: 1;
            overflow-y: auto;
            padding: 30px 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .cooking-step {
            display: none;
        }
        
        .cooking-step.active {
            display: block;
        }
        
        .step-ingredients {
            background-color: #fff3e0;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 25px;
        }
        
        .step-ingredients h3 {
            color: #e65100;
            margin-bottom: 15px;
            font-size: 1.1em;
        }
        
        .step-ingredients ul {
            list-style: none;
            padding: 0;
        }
        
        .step-ingredients li {
            padding: 8px 0;
            font-size: 1.1em;
            border-bottom: 1px solid #ffe0b2;
        }
        
        .step-ingredients li:last-child {
            border-bottom: none;
        }
        
        .step-instruction {
            font-size: 1.3em;
            line-height: 1.8;
            color: #333;
        }
        
        .cooking-mode-navigation {
            display: flex;
            gap: 10px;
            padding: 20px;
            background-color: #f5f5f5;
            border-top: 1px solid #ddd;
        }
        
        .cooking-nav-button {
            flex: 1;
            padding: 15px;
            font-size: 1.1em;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        
        .cooking-nav-button.prev {
            background-color: #e0e0e0;
            color: #333;
        }
        
        .cooking-nav-button.prev:hover:not(:disabled) {
            background-color: #d0d0d0;
        }
        
        .cooking-nav-button.next {
            background-color: #4caf50;
            color: white;
        }
        
        .cooking-nav-button.next:hover:not(:disabled) {
            background-color: #45a049;
        }
        
        .cooking-nav-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        @media print {
            .nav-buttons {
                display: none;
            }
            
            .page {
                display: block !important;
            }
            
            .meal-content {
                display: block !important;
            }
            
            .expand-icon {
                display: none;
            }
            
            .cooking-mode-button {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Week 1 Meal Plan</h1>
        <p class="subtitle">Vegetarian dinners with leftovers for lunch | 4-5 servings per meal</p>
        
        <div class="nav-buttons">
            <button class="nav-button active" onclick="showPage('meals')">Meal Plan</button>
            <button class="nav-button" onclick="showPage('grocery')">Grocery List</button>
        </div>
        
        <!-- MEAL PLAN PAGE -->
        <div id="meals" class="page active">
            
            <!-- MEAL 1 -->
            <div class="meal-day" data-meal="meal1">
                <div class="meal-header" onclick="toggleMeal(this)">
                    <div>
                        <h2>Meal 1: Creamy Coconut Red Lentil Curry</h2>
                        <div class="meal-meta">Serves 4-5 | Time: 30 minutes</div>
                    </div>
                    <span class="expand-icon">‚ñº</span>
                </div>
                <div class="meal-content">
                    <p>Red lentils simmered with coconut milk, tomatoes, ginger, garlic, and garam masala. Served over rice with naan or flatbread.</p>
                    
                    <h3>Ingredients</h3>
                    <ul>
                        <li>1¬Ω tablespoons olive oil or coconut oil</li>
                        <li>1 medium onion, diced</li>
                        <li>3 cloves garlic, minced</li>
                        <li>1¬Ω tablespoons fresh ginger, minced</li>
                        <li>1¬Ω tablespoons garam masala</li>
                        <li>¬æ teaspoon cumin</li>
                        <li>¬æ teaspoon turmeric</li>
                        <li>¬º teaspoon cayenne pepper (optional, or to taste)</li>
                        <li>1¬Ω cups red lentils, rinsed</li>
                        <li>1 can (14.5 oz) diced tomatoes</li>
                        <li>1 can (13.5 oz) coconut milk</li>
                        <li>2 cups vegetable broth</li>
                        <li>1¬Ω teaspoons salt (or to taste)</li>
                        <li>1¬Ω cups spinach, roughly chopped</li>
                        <li>Juice of ¬Ω lemon</li>
                        <li>Rice for serving (2 cups uncooked)</li>
                        <li>Naan or flatbread for serving</li>
                    </ul>
                    
                    <h3>Instructions</h3>
                    <ol>
                        <li>Start cooking rice according to package directions (2 cups uncooked rice).</li>
                        <li>Heat oil in a large pot or Dutch oven over medium heat. Add onion and cook for 5 minutes until softened.</li>
                        <li>Add garlic and ginger, cook for 1 minute until fragrant.</li>
                        <li>Add garam masala, cumin, turmeric, and cayenne. Stir for 30 seconds.</li>
                        <li>Add red lentils, diced tomatoes (with juice), coconut milk, and vegetable broth. Stir well.</li>
                        <li>Bring to a boil, then reduce heat and simmer uncovered for 20-25 minutes, stirring occasionally, until lentils are completely soft and broken down.</li>
                        <li>Stir in spinach and cook until wilted, about 2 minutes.</li>
                        <li>Add salt and lemon juice to taste.</li>
                        <li>Serve over rice with naan on the side.</li>
                    </ol>
                    
                    <div class="baby-note">
                        <strong>For baby:</strong> Before adding cayenne, remove a portion of the curry. The lentils should be very soft and easily mashed. Serve with rice and torn pieces of soft naan. You can thin with a bit of extra coconut milk if needed.
                    </div>
                    
                    <div class="storage-tip">
                        <strong>Storage tip:</strong> This curry actually improves overnight. Store curry and rice separately. Add a splash of water or broth when reheating as it thickens.
                    </div>
                    
                    <button class="cooking-mode-button" onclick="startCookingMode('meal1')">Start Cooking Mode</button>
                </div>
            </div>
            
            <!-- MEAL 2 -->
            <div class="meal-day" data-meal="meal2">
                <div class="meal-header" onclick="toggleMeal(this)">
                    <div>
                        <h2>Meal 2: Ginger Garlic Stir-Fried Noodles with Vegetables</h2>
                        <div class="meal-meta">Serves 4-5 | Time: 30 minutes</div>
                    </div>
                    <span class="expand-icon">‚ñº</span>
                </div>
                <div class="meal-content">
                    <p>Chewy rice noodles tossed with crispy vegetables in a savory ginger-garlic sauce, topped with crushed peanuts and fresh herbs.</p>
                    
                    <h3>Ingredients</h3>
                    <h4>For the noodles and vegetables:</h4>
                    <ul>
                        <li>12 oz rice noodles (pad thai style) or lo mein noodles</li>
                        <li>2 tablespoons vegetable oil, divided</li>
                        <li>1 block (14 oz) firm tofu, pressed and cubed</li>
                        <li>1 red bell pepper, sliced into strips</li>
                        <li>1 cup snap peas or snow peas</li>
                        <li>2 medium carrots, julienned or shredded</li>
                        <li>1 cup broccoli florets, cut small</li>
                        <li>3 green onions, cut into 1-inch pieces</li>
                        <li>2 cups baby bok choy or napa cabbage, chopped</li>
                    </ul>
                    
                    <h4>For the sauce:</h4>
                    <ul>
                        <li>3 tablespoons soy sauce</li>
                        <li>1¬Ω tablespoons rice vinegar</li>
                        <li>1 tablespoon sesame oil</li>
                        <li>1 tablespoon maple syrup or brown sugar</li>
                        <li>2 tablespoons fresh ginger, minced</li>
                        <li>4 cloves garlic, minced</li>
                        <li>1 teaspoon cornstarch</li>
                        <li>2 tablespoons water</li>
                        <li>1 teaspoon chili garlic sauce or sriracha (optional)</li>
                    </ul>
                    
                    <h4>For garnish:</h4>
                    <ul>
                        <li>¬º cup crushed peanuts or cashews</li>
                        <li>Fresh cilantro or Thai basil</li>
                        <li>Lime wedges</li>
                        <li>Sesame seeds</li>
                    </ul>
                    
                    <h3>Instructions</h3>
                    <ol>
                        <li>Cook rice noodles according to package directions. Drain, rinse with cold water, and set aside.</li>
                        <li>In a small bowl, whisk together soy sauce, rice vinegar, sesame oil, maple syrup, ginger, garlic, cornstarch, water, and chili sauce if using. Set aside.</li>
                        <li>Heat 1 tablespoon vegetable oil in a large wok or deep skillet over high heat. Add tofu cubes and cook, stirring occasionally, for 5-7 minutes until golden and crispy on most sides. Remove and set aside.</li>
                        <li>Add remaining 1 tablespoon oil to the wok. Add bell pepper, snap peas, carrots, and broccoli. Stir-fry for 3-4 minutes until vegetables are tender-crisp and bright.</li>
                        <li>Add green onions and bok choy, stir-fry for 1-2 minutes until bok choy wilts.</li>
                        <li>Return tofu to the wok. Add cooked noodles and pour the sauce over everything. Toss everything together for 2-3 minutes until noodles are heated through and coated in sauce.</li>
                        <li>Remove from heat. Taste and adjust seasoning with more soy sauce if needed.</li>
                        <li>Serve in bowls topped with crushed peanuts, fresh herbs, lime wedges, and sesame seeds.</li>
                    </ol>
                    
                    <div class="baby-note">
                        <strong>For baby:</strong> Set aside plain cooked noodles and soft-cooked vegetables (broccoli, carrots, bok choy) before adding sauce. Cut tofu and noodles into small pieces. You can add a tiny bit of the sauce for flavor or serve plain. Skip the peanuts for choking safety.
                    </div>
                    
                    <div class="storage-tip">
                        <strong>Storage tip:</strong> Store in airtight container for up to 4 days. Noodles may absorb sauce and become less saucy - add a splash of soy sauce and sesame oil when reheating. Reheat in a skillet for best texture.
                    </div>
                    
                    <button class="cooking-mode-button" onclick="startCookingMode('meal2')">Start Cooking Mode</button>
                </div>
            </div>
            
            <!-- MEAL 3 -->
            <div class="meal-day" data-meal="meal3">
                <div class="meal-header" onclick="toggleMeal(this)">
                    <div>
                        <h2>Meal 3: Mediterranean Chickpea Bowls</h2>
                        <div class="meal-meta">Serves 4-5 | Time: 35 minutes</div>
                    </div>
                    <span class="expand-icon">‚ñº</span>
                </div>
                <div class="meal-content">
                    <p>Roasted chickpeas with za'atar, cucumber-tomato salad, hummus, couscous, and a lemon-tahini dressing.</p>
                    
                    <h3>Ingredients</h3>
                    <h4>For the chickpeas:</h4>
                    <ul>
                        <li>2 cans (15 oz each) chickpeas, drained, rinsed, and patted dry</li>
                        <li>2 tablespoons olive oil</li>
                        <li>1¬Ω tablespoons za'atar (or 2 teaspoons dried oregano + 1 teaspoon sesame seeds)</li>
                        <li>¬æ teaspoon cumin</li>
                        <li>¬º teaspoon paprika</li>
                        <li>Salt and pepper</li>
                    </ul>
                    
                    <h4>For the bowls:</h4>
                    <ul>
                        <li>1¬Ω cups couscous</li>
                        <li>2 cups boiling water or vegetable broth</li>
                        <li>1¬Ω tablespoons olive oil</li>
                        <li>Salt</li>
                        <li>1 cup hummus (store-bought or homemade)</li>
                        <li>1 large cucumber, diced</li>
                        <li>2 cups cherry tomatoes, halved</li>
                        <li>¬º red onion, finely diced</li>
                        <li>3 tablespoons fresh parsley or cilantro, chopped</li>
                        <li>1¬Ω tablespoons lemon juice</li>
                        <li>1¬Ω tablespoons olive oil</li>
                        <li>Salt and pepper</li>
                    </ul>
                    
                    <h4>For the lemon-tahini dressing:</h4>
                    <ul>
                        <li>‚Öì cup tahini</li>
                        <li>3 tablespoons lemon juice</li>
                        <li>1 clove garlic, minced</li>
                        <li>4-5 tablespoons water (to thin)</li>
                        <li>Salt to taste</li>
                    </ul>
                    
                    <h3>Instructions</h3>
                    <ol>
                        <li>Preheat oven to 400¬∞F.</li>
                        <li>Spread dried chickpeas on a baking sheet. Toss with olive oil, za'atar, cumin, paprika, salt, and pepper. Roast for 25-30 minutes, shaking the pan halfway through, until golden and slightly crispy.</li>
                        <li>While chickpeas roast, place couscous in a large bowl. Add salt and olive oil. Pour boiling water or broth over couscous, stir, cover with a plate or plastic wrap, and let sit for 5 minutes. Fluff with a fork.</li>
                        <li>In a bowl, combine cucumbers, tomatoes, red onion, and parsley. Dress with lemon juice, olive oil, salt, and pepper.</li>
                        <li>Whisk together tahini, lemon juice, and garlic. Add water one tablespoon at a time until you reach a pourable consistency. Season with salt.</li>
                        <li>For each serving, add a base of couscous, top with roasted chickpeas, cucumber-tomato salad, a dollop of hummus, and drizzle with tahini dressing.</li>
                    </ol>
                    
                    <div class="baby-note">
                        <strong>For baby:</strong> Set aside chickpeas before adding heavy seasoning (or mash some of the roasted ones). Serve with couscous, small cucumber pieces (peeled and deseeded), and a small amount of hummus. The tahini dressing can be thinned and offered in small amounts.
                    </div>
                    
                    <div class="storage-tip">
                        <strong>Storage tip:</strong> Store all components separately. Chickpeas lose their crispness but are still delicious. Everything keeps well for 3-4 days.
                    </div>
                    
                    <button class="cooking-mode-button" onclick="startCookingMode('meal3')">Start Cooking Mode</button>
                </div>
            </div>
            
        </div>
        
        <!-- GROCERY LIST PAGE -->
        <div id="grocery" class="page">
            <h2 style="color: #2c5f2d; margin-bottom: 20px;">Complete Shopping List - Week 1</h2>
            
            <div class="share-section">
                <button class="share-button" onclick="generateShareLink()">üì§ Share List</button>
                <button class="share-button" onclick="clearAllChecks()">‚Ü∫ Clear All Checks</button>
                <div class="share-url" id="shareUrl">
                    <p><strong>Share this link:</strong></p>
                    <p id="shareUrlText"></p>
                    <button class="copy-button" onclick="copyShareLink()">Copy Link</button>
                </div>
            </div>
            
            <div class="grocery-list">
                <div class="grocery-section">
                    <h3>Produce</h3>
                    <ul id="produce-list">
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Onions, yellow or white (1 medium)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Red onion (¬Ω small)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Red bell pepper (1)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Carrots (2 medium)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Broccoli (1 cup florets)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Snap peas or snow peas (1 cup)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Baby bok choy or napa cabbage (2 cups)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Green onions (3)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Cherry tomatoes (2 cups - about 1 pint)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Cucumber (1 large)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Spinach, fresh (1¬Ω cups - small bag)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Garlic (2 heads - you'll need 8 cloves total)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Fresh ginger (1 large knob)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Lemons (2-3)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Limes (for garnish)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Fresh cilantro or parsley (1-2 bunches)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Thai basil or regular basil (optional)</span></li>
                    </ul>
                    <div class="add-item-section">
                        <input type="text" class="add-item-input" id="produce-input" placeholder="Add item...">
                        <button class="add-item-button" onclick="addItem('produce-list', 'produce-input')">Add</button>
                    </div>
                </div>
                
                <div class="grocery-section">
                    <h3>Pantry/Dry Goods</h3>
                    <ul id="pantry-list">
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Red lentils (1¬Ω cups)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Chickpeas, canned (2 cans, 15 oz each)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Rice noodles or lo mein noodles (12 oz)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Couscous (1¬Ω cups)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Rice (2 cups uncooked)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Naan or flatbread (1 package)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Coconut milk, full-fat (1 can, 13.5 oz)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Diced tomatoes (1 can, 14.5 oz)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Hummus (1 cup/8 oz)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Tahini (‚Öì cup)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Vegetable broth (4 cups total)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Soy sauce</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Rice vinegar</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Sesame oil</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Maple syrup or brown sugar</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Cornstarch</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Crushed peanuts or cashews (¬º cup)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Sesame seeds</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Chili garlic sauce or sriracha (optional)</span></li>
                    </ul>
                    <div class="add-item-section">
                        <input type="text" class="add-item-input" id="pantry-input" placeholder="Add item...">
                        <button class="add-item-button" onclick="addItem('pantry-list', 'pantry-input')">Add</button>
                    </div>
                </div>
                
                <div class="grocery-section">
                    <h3>Refrigerated/Protein</h3>
                    <ul id="refrigerated-list">
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Firm tofu (1 block, 14 oz)</span></li>
                    </ul>
                    <div class="add-item-section">
                        <input type="text" class="add-item-input" id="refrigerated-input" placeholder="Add item...">
                        <button class="add-item-button" onclick="addItem('refrigerated-list', 'refrigerated-input')">Add</button>
                    </div>
                </div>
                
                <div class="grocery-section">
                    <h3>Spices/Seasonings to Check</h3>
                    <ul id="spices-list">
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Cumin (ground)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Garam masala</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Turmeric</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Cayenne pepper (optional)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Za'atar (or dried oregano + sesame seeds)</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Paprika</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Salt and black pepper</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Olive oil</span></li>
                        <li><input type="checkbox" onchange="toggleItem(this)"><span>Vegetable oil</span></li>
                    </ul>
                    <div class="add-item-section">
                        <input type="text" class="add-item-input" id="spices-input" placeholder="Add item...">
                        <button class="add-item-button" onclick="addItem('spices-list', 'spices-input')">Add</button>
                    </div>
                </div>
                
                <div class="grocery-section">
                    <h3>Costco</h3>
                    <ul id="costco-list">
                    </ul>
                    <div class="add-item-section">
                        <input type="text" class="add-item-input" id="costco-input" placeholder="Add item...">
                        <button class="add-item-button" onclick="addItem('costco-list', 'costco-input')">Add</button>
                    </div>
                </div>
            </div>
        </div>
        
    </div>
    
    <!-- COOKING MODE OVERLAY -->
    <div class="cooking-mode-overlay" id="cookingModeOverlay">
        <div class="cooking-mode-header">
            <div class="cooking-mode-title" id="cookingModeTitle">Cooking Mode</div>
            <button class="close-cooking-mode" onclick="exitCookingMode()">‚úï</button>
        </div>
        <div class="cooking-mode-progress" id="cookingModeProgress">Step 1 of 6</div>
        <div class="cooking-mode-content" id="cookingModeContent">
            <!-- Steps will be inserted here -->
        </div>
        <div class="cooking-mode-navigation">
            <button class="cooking-nav-button prev" id="prevStepBtn" onclick="prevStep()">‚Üê Previous</button>
            <button class="cooking-nav-button next" id="nextStepBtn" onclick="nextStep()">Next ‚Üí</button>
        </div>
    </div>
    
    <script>
        const recipes = {
            meal1: {
                title: "Creamy Coconut Red Lentil Curry",
                steps: [
                    {
                        ingredients: ["2 cups uncooked rice"],
                        instruction: "Start cooking rice according to package directions (2 cups uncooked rice)."
                    },
                    {
                        ingredients: [
                            "1¬Ω tablespoons oil",
                            "1 medium onion, diced"
                        ],
                        instruction: "Heat oil in a large pot or Dutch oven over medium heat. Add onion and cook for 5 minutes until softened."
                    },
                    {
                        ingredients: [
                            "3 cloves garlic, minced",
                            "1¬Ω tablespoons fresh ginger, minced"
                        ],
                        instruction: "Add garlic and ginger, cook for 1 minute until fragrant."
                    },
                    {
                        ingredients: [
                            "1¬Ω tablespoons garam masala",
                            "¬æ teaspoon cumin",
                            "¬æ teaspoon turmeric",
                            "¬º teaspoon cayenne pepper (optional)"
                        ],
                        instruction: "Add garam masala, cumin, turmeric, and cayenne. Stir for 30 seconds."
                    },
                    {
                        ingredients: [
                            "1¬Ω cups red lentils, rinsed",
                            "1 can (14.5 oz) diced tomatoes",
                            "1 can (13.5 oz) coconut milk",
                            "2 cups vegetable broth"
                        ],
                        instruction: "Add red lentils, diced tomatoes (with juice), coconut milk, and vegetable broth. Stir well. Bring to a boil, then reduce heat and simmer uncovered for 20-25 minutes, stirring occasionally, until lentils are completely soft and broken down."
                    },
                    {
                        ingredients: [
                            "1¬Ω cups spinach, chopped",
                            "1¬Ω teaspoons salt",
                            "Juice of ¬Ω lemon"
                        ],
                        instruction: "Stir in spinach and cook until wilted, about 2 minutes. Add salt and lemon juice to taste."
                    },
                    {
                        ingredients: [
                            "Cooked rice",
                            "Naan or flatbread"
                        ],
                        instruction: "Serve over rice with naan on the side."
                    }
                ]
            },
            meal2: {
                title: "Ginger Garlic Stir-Fried Noodles with Vegetables",
                steps: [
                    {
                        ingredients: ["12 oz rice noodles or lo mein noodles"],
                        instruction: "Cook rice noodles according to package directions. Drain, rinse with cold water, and set aside."
                    },
                    {
                        ingredients: [
                            "3 tablespoons soy sauce",
                            "1¬Ω tablespoons rice vinegar",
                            "1 tablespoon sesame oil",
                            "1 tablespoon maple syrup or brown sugar",
                            "2 tablespoons fresh ginger, minced",
                            "4 cloves garlic, minced",
                            "1 teaspoon cornstarch",
                            "2 tablespoons water",
                            "1 teaspoon chili garlic sauce or sriracha (optional)"
                        ],
                        instruction: "In a small bowl, whisk together soy sauce, rice vinegar, sesame oil, maple syrup, ginger, garlic, cornstarch, water, and chili sauce if using. Set aside."
                    },
                    {
                        ingredients: [
                            "1 tablespoon vegetable oil",
                            "1 block (14 oz) firm tofu, cubed"
                        ],
                        instruction: "Heat 1 tablespoon vegetable oil in a large wok or deep skillet over high heat. Add tofu cubes and cook, stirring occasionally, for 5-7 minutes until golden and crispy on most sides. Remove and set aside."
                    },
                    {
                        ingredients: [
                            "1 tablespoon vegetable oil",
                            "1 red bell pepper, sliced",
                            "1 cup snap peas or snow peas",
                            "2 medium carrots, julienned",
                            "1 cup broccoli florets"
                        ],
                        instruction: "Add remaining 1 tablespoon oil to the wok. Add bell pepper, snap peas, carrots, and broccoli. Stir-fry for 3-4 minutes until vegetables are tender-crisp and bright."
                    },
                    {
                        ingredients: [
                            "3 green onions, cut into 1-inch pieces",
                            "2 cups baby bok choy or napa cabbage, chopped"
                        ],
                        instruction: "Add green onions and bok choy, stir-fry for 1-2 minutes until bok choy wilts."
                    },
                    {
                        ingredients: [
                            "Cooked tofu",
                            "Cooked noodles",
                            "Prepared sauce"
                        ],
                        instruction: "Return tofu to the wok. Add cooked noodles and pour the sauce over everything. Toss everything together for 2-3 minutes until noodles are heated through and coated in sauce. Taste and adjust seasoning with more soy sauce if needed."
                    },
                    {
                        ingredients: [
                            "¬º cup crushed peanuts or cashews",
                            "Fresh cilantro or Thai basil",
                            "Lime wedges",
                            "Sesame seeds"
                        ],
                        instruction: "Serve in bowls topped with crushed peanuts, fresh herbs, lime wedges, and sesame seeds."
                    }
                ]
            },
            meal3: {
                title: "Mediterranean Chickpea Bowls",
                steps: [
                    {
                        ingredients: [],
                        instruction: "Preheat oven to 400¬∞F."
                    },
                    {
                        ingredients: [
                            "2 cans chickpeas, dried",
                            "2 tablespoons olive oil",
                            "1¬Ω tablespoons za'atar",
                            "¬æ teaspoon cumin",
                            "¬º teaspoon paprika",
                            "Salt and pepper"
                        ],
                        instruction: "Spread dried chickpeas on a baking sheet. Toss with olive oil, za'atar, cumin, paprika, salt, and pepper. Roast for 25-30 minutes, shaking the pan halfway through, until golden and slightly crispy."
                    },
                    {
                        ingredients: [
                            "1¬Ω cups couscous",
                            "2 cups boiling water or broth",
                            "1¬Ω tablespoons olive oil",
                            "Salt"
                        ],
                        instruction: "While chickpeas roast, place couscous in a large bowl. Add salt and olive oil. Pour boiling water or broth over couscous, stir, cover with a plate or plastic wrap, and let sit for 5 minutes. Fluff with a fork."
                    },
                    {
                        ingredients: [
                            "1 large cucumber, diced",
                            "2 cups cherry tomatoes, halved",
                            "¬º red onion, diced",
                            "3 tablespoons parsley, chopped",
                            "1¬Ω tablespoons lemon juice",
                            "1¬Ω tablespoons olive oil",
                            "Salt and pepper"
                        ],
                        instruction: "In a bowl, combine cucumbers, tomatoes, red onion, and parsley. Dress with lemon juice, olive oil, salt, and pepper."
                    },
                    {
                        ingredients: [
                            "‚Öì cup tahini",
                            "3 tablespoons lemon juice",
                            "1 clove garlic, minced",
                            "4-5 tablespoons water",
                            "Salt"
                        ],
                        instruction: "Whisk together tahini, lemon juice, and garlic. Add water one tablespoon at a time until you reach a pourable consistency. Season with salt."
                    },
                    {
                        ingredients: [
                            "Couscous",
                            "Roasted chickpeas",
                            "Cucumber-tomato salad",
                            "1 cup hummus",
                            "Tahini dressing"
                        ],
                        instruction: "For each serving, add a base of couscous, top with roasted chickpeas, cucumber-tomato salad, a dollop of hummus, and drizzle with tahini dressing."
                    }
                ]
            }
        };
        
        let currentRecipe = null;
        let currentStepIndex = 0;
        
        function startCookingMode(mealId) {
            currentRecipe = recipes[mealId];
            currentStepIndex = 0;
            
            const overlay = document.getElementById('cookingModeOverlay');
            overlay.classList.add('active');
            
            document.getElementById('cookingModeTitle').textContent = currentRecipe.title;
            
            renderStep();
            
            // Prevent scrolling on body
            document.body.style.overflow = 'hidden';
        }
        
        function exitCookingMode() {
            const overlay = document.getElementById('cookingModeOverlay');
            overlay.classList.remove('active');
            currentRecipe = null;
            currentStepIndex = 0;
            
            // Re-enable scrolling
            document.body.style.overflow = 'auto';
        }
        
        function renderStep() {
            if (!currentRecipe) return;
            
            const step = currentRecipe.steps[currentStepIndex];
            const totalSteps = currentRecipe.steps.length;
            
            // Update progress
            document.getElementById('cookingModeProgress').textContent = 
                `Step ${currentStepIndex + 1} of ${totalSteps}`;
            
            // Build step HTML
            let stepHTML = '<div class="cooking-step active">';
            
            if (step.ingredients.length > 0) {
                stepHTML += '<div class="step-ingredients">';
                stepHTML += '<h3>Ingredients for this step:</h3>';
                stepHTML += '<ul>';
                step.ingredients.forEach(ingredient => {
                    stepHTML += `<li>${ingredient}</li>`;
                });
                stepHTML += '</ul>';
                stepHTML += '</div>';
            }
            
            stepHTML += `<div class="step-instruction">${step.instruction}</div>`;
            stepHTML += '</div>';
            
            document.getElementById('cookingModeContent').innerHTML = stepHTML;
            
            // Update buttons
            document.getElementById('prevStepBtn').disabled = currentStepIndex === 0;
            
            const nextBtn = document.getElementById('nextStepBtn');
            if (currentStepIndex === totalSteps - 1) {
                nextBtn.textContent = 'Done ‚úì';
            } else {
                nextBtn.textContent = 'Next ‚Üí';
            }
        }
        
        function nextStep() {
            if (!currentRecipe) return;
            
            if (currentStepIndex < currentRecipe.steps.length - 1) {
                currentStepIndex++;
                renderStep();
            } else {
                exitCookingMode();
            }
        }
        
        function prevStep() {
            if (!currentRecipe) return;
            
            if (currentStepIndex > 0) {
                currentStepIndex--;
                renderStep();
            }
        }
        
        // Add swipe support for mobile
        let touchStartX = 0;
        let touchEndX = 0;
        
        document.getElementById('cookingModeContent').addEventListener('touchstart', e => {
            touchStartX = e.changedTouches[0].screenX;
        });
        
        document.getElementById('cookingModeContent').addEventListener('touchend', e => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });
        
        function handleSwipe() {
            const swipeThreshold = 50;
            const diff = touchStartX - touchEndX;
            
            if (Math.abs(diff) > swipeThreshold) {
                if (diff > 0) {
                    // Swiped left - next step
                    nextStep();
                } else {
                    // Swiped right - previous step
                    prevStep();
                }
            }
        }
        
        function toggleMeal(header) {
            const mealDay = header.parentElement;
            mealDay.classList.toggle('expanded');
        }
        
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            document.querySelectorAll('.nav-button').forEach(button => {
                button.classList.remove('active');
            });
            
            document.getElementById(pageId).classList.add('active');
            
            event.target.classList.add('active');
        }
        
        // Grocery list functions
        function toggleItem(checkbox) {
            const listItem = checkbox.parentElement;
            if (checkbox.checked) {
                listItem.classList.add('checked');
            } else {
                listItem.classList.remove('checked');
            }
            saveListState();
        }
        
        function addItem(listId, inputId) {
            const input = document.getElementById(inputId);
            const itemText = input.value.trim();
            
            if (itemText === '') return;
            
            const list = document.getElementById(listId);
            const newItem = document.createElement('li');
            
            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.onchange = function() { toggleItem(this); };
            
            const span = document.createElement('span');
            span.textContent = itemText;
            
            const deleteBtn = document.createElement('span');
            deleteBtn.className = 'delete-item';
            deleteBtn.textContent = '‚úï';
            deleteBtn.onclick = function() { deleteItem(this); };
            
            newItem.appendChild(checkbox);
            newItem.appendChild(span);
            newItem.appendChild(deleteBtn);
            
            list.appendChild(newItem);
            input.value = '';
            saveListState();
        }
        
        function deleteItem(deleteBtn) {
            const listItem = deleteBtn.parentElement;
            listItem.remove();
            saveListState();
        }
        
        // Save the entire list state to localStorage
        function saveListState() {
            const lists = ['produce-list', 'pantry-list', 'refrigerated-list', 'spices-list', 'costco-list'];
            const state = {};
            
            lists.forEach(listId => {
                const list = document.getElementById(listId);
                const items = [];
                
                list.querySelectorAll('li').forEach(li => {
                    const checkbox = li.querySelector('input[type="checkbox"]');
                    const span = li.querySelector('span');
                    items.push({
                        text: span.textContent,
                        checked: checkbox.checked
                    });
                });
                
                state[listId] = items;
            });
            
            localStorage.setItem('groceryList', JSON.stringify(state));
        }
        
        // Load the list state from localStorage
        function loadListState() {
            const saved = localStorage.getItem('groceryList');
            if (!saved) return;
            
            const state = JSON.parse(saved);
            const lists = ['produce-list', 'pantry-list', 'refrigerated-list', 'spices-list', 'costco-list'];
            
            lists.forEach(listId => {
                if (!state[listId] || state[listId].length === 0) return;
                
                const list = document.getElementById(listId);
                
                // Clear existing items
                list.innerHTML = '';
                
                // Rebuild from saved state
                state[listId].forEach(item => {
                    const newItem = document.createElement('li');
                    
                    const checkbox = document.createElement('input');
                    checkbox.type = 'checkbox';
                    checkbox.checked = item.checked;
                    checkbox.onchange = function() { toggleItem(this); };
                    
                    const span = document.createElement('span');
                    span.textContent = item.text;
                    
                    // Only add delete button for custom items (those not in original list)
                    const isCustomItem = !isOriginalItem(listId, item.text);
                    if (isCustomItem) {
                        const deleteBtn = document.createElement('span');
                        deleteBtn.className = 'delete-item';
                        deleteBtn.textContent = '‚úï';
                        deleteBtn.onclick = function() { deleteItem(this); };
                        newItem.appendChild(checkbox);
                        newItem.appendChild(span);
                        newItem.appendChild(deleteBtn);
                    } else {
                        newItem.appendChild(checkbox);
                        newItem.appendChild(span);
                    }
                    
                    if (item.checked) {
                        newItem.classList.add('checked');
                    }
                    
                    list.appendChild(newItem);
                });
            });
        }
        
        // Check if an item is from the original list (to know whether to show delete button)
        function isOriginalItem(listId, text) {
            // This is a simple check - you could make it more sophisticated
            return !text.includes('‚úï');
        }
        
        // Generate a shareable link
        function generateShareLink() {
            const state = localStorage.getItem('groceryList');
            
            if (!state) {
                alert('No list data to share. Make sure you have checked some items or added items first!');
                return;
            }
            
            try {
                // Convert string to hex encoding (Safari-safe)
                const hex = Array.from(state)
                    .map(c => c.charCodeAt(0).toString(16).padStart(2, '0'))
                    .join('');
                
                const url = window.location.href.split('?')[0] + '?list=' + hex;
                
                document.getElementById('shareUrlText').textContent = url;
                document.getElementById('shareUrl').classList.add('active');
            } catch (e) {
                alert('Error generating share link: ' + e.message);
                console.error('Share link error:', e);
            }
        }
        
        // Copy share link to clipboard
        function copyShareLink() {
            const urlText = document.getElementById('shareUrlText').textContent;
            navigator.clipboard.writeText(urlText).then(() => {
                alert('Link copied to clipboard! Send this to share your list.');
            }).catch(() => {
                // Fallback for older browsers
                alert('Copy this link: ' + urlText);
            });
        }
        
        // Clear all checkboxes
        function clearAllChecks() {
            if (!confirm('Clear all checked items? This will uncheck everything but keep your added items.')) {
                return;
            }
            
            const lists = ['produce-list', 'pantry-list', 'refrigerated-list', 'spices-list', 'costco-list'];
            lists.forEach(listId => {
                const list = document.getElementById(listId);
                list.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                    checkbox.checked = false;
                    checkbox.parentElement.classList.remove('checked');
                });
            });
            saveListState();
        }
        
        // Load list from URL parameter if present
        function loadFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            const listData = urlParams.get('list');
            
            if (listData) {
                try {
                    // Decode from hex format
                    const decoded = listData.match(/.{1,2}/g)
                        .map(hex => String.fromCharCode(parseInt(hex, 16)))
                        .join('');
                    
                    // Verify it's valid JSON before saving
                    JSON.parse(decoded);
                    
                    localStorage.setItem('groceryList', decoded);
                    
                    // Force reload the state
                    setTimeout(() => {
                        loadListState();
                        
                        // Remove the parameter from URL so it doesn't keep reloading
                        window.history.replaceState({}, document.title, window.location.pathname);
                        
                        alert('Shopping list imported successfully! ‚úì');
                    }, 100);
                    
                } catch (e) {
                    console.error('Error loading list from URL:', e);
                    alert('Error loading shared list. The link may be corrupted. Please ask for a new link.');
                }
            }
        }
        
        // Allow Enter key to add items
        document.addEventListener('DOMContentLoaded', function() {
            // Check if we're loading from a shared URL
            loadFromURL();
            
            // Load saved state
            loadListState();
            
            // Setup Enter key listeners
            const inputs = document.querySelectorAll('.add-item-input');
            inputs.forEach(input => {
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        const button = this.nextElementSibling;
                        button.click();
                    }
                });
            });
        });
    </script>
</body>
</html>